{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://ralph.internal/schemas/test_repro_schema.json",
  "title": "Test schema for status-validator-registry repro",
  "description": "Minimal schema for testing mixed-format registry parsing",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "status_schema_version",
    "contract_version",
    "build_id",
    "runtime_config_hash",
    "supported_profiles",
    "enforced_profile",
    "trading_mode",
    "risk_state",
    "bunker_mode_active",
    "connectivity_degraded",
    "mode_reasons",
    "open_permission_blocked_latch",
    "open_permission_reason_codes",
    "open_permission_requires_reconcile",
    "policy_age_sec",
    "last_policy_update_ts",
    "f1_cert_state",
    "f1_cert_expires_at",
    "disk_used_pct",
    "disk_used_last_update_ts_ms",
    "disk_used_pct_secondary",
    "disk_used_secondary_last_update_ts_ms",
    "mm_util",
    "mm_util_last_update_ts_ms",
    "loop_tick_last_ts_ms",
    "wal_queue_depth",
    "wal_queue_capacity",
    "wal_queue_enqueue_failures",
    "atomic_naked_events_24h",
    "429_count_5m",
    "10028_count_5m",
    "deribit_http_p95_ms",
    "ws_event_lag_ms"
  ],
  "properties": {
    "status_schema_version": { "type": "integer", "const": 1 },
    "contract_version": { "type": "string", "const": "5.2" },
    "build_id": { "type": "string", "minLength": 1 },
    "runtime_config_hash": { "type": "string", "minLength": 1 },
    "supported_profiles": { "type": "array", "items": { "type": "string" } },
    "enforced_profile": { "type": "string", "const": "CSP" },
    "trading_mode": { "enum": ["Active", "ReduceOnly", "Kill"] },
    "risk_state": { "enum": ["Healthy", "Degraded", "Maintenance"] },
    "bunker_mode_active": { "type": "boolean" },
    "connectivity_degraded": { "type": "boolean" },
    "mode_reasons": {
      "type": "array",
      "items": { "type": "string" }
    },
    "open_permission_blocked_latch": { "type": "boolean" },
    "open_permission_reason_codes": {
      "type": "array",
      "items": { "type": "string" }
    },
    "open_permission_requires_reconcile": { "type": "boolean" },
    "policy_age_sec": { "type": "number" },
    "last_policy_update_ts": { "type": "number" },
    "f1_cert_state": { "enum": ["PASS", "FAIL", "STALE", "MISSING", "INVALID"] },
    "f1_cert_expires_at": { "type": "number" },
    "disk_used_pct": { "type": "number" },
    "disk_used_last_update_ts_ms": { "type": "number" },
    "disk_used_pct_secondary": { "type": "number" },
    "disk_used_secondary_last_update_ts_ms": { "type": "number" },
    "mm_util": { "type": "number" },
    "mm_util_last_update_ts_ms": { "type": "number" },
    "loop_tick_last_ts_ms": { "type": "number" },
    "wal_queue_depth": { "type": "number" },
    "wal_queue_capacity": { "type": "number" },
    "wal_queue_enqueue_failures": { "type": "number" },
    "atomic_naked_events_24h": { "type": "number" },
    "429_count_5m": { "type": "number" },
    "10028_count_5m": { "type": "number" },
    "deribit_http_p95_ms": { "type": "number" },
    "ws_event_lag_ms": { "type": "number" },
    "owner_view": { "type": "object" }
  }
}
